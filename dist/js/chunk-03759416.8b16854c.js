(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-03759416"],{"6ef7":function(t,e,r){"use strict";var n=r("be78");r.n(n).a},be78:function(t,e,r){},f06d:function(t,e,r){"use strict";r.r(e);var n=(r("a481"),r("f751"),r("ac4d"),r("8a81"),r("c5f6"),r("4917"),r("96cf"),r("1da1")),a=(r("ac6a"),r("456d"),r("be94")),s=r("2740"),o=r("17ab"),i=r("4875"),c=r("7766"),u=r("e57e"),h=r("7457"),l=r("365c"),p=r("0f06").api,d=function(t){return l.a.post("".concat(p,"/WeixinOrderScan"),t)},f=function(t){return l.a.post("".concat(p,"/WeixinOrderScanList"),t)},g=function(t){return l.a.post("".concat(p,"/getBoxHandlingFee"),t)},m=function(t){return l.a.post("".concat(p,"/prepayWeixinOrder"),t)},b=function(t){return l.a.post("".concat(p,"/orderSearchGoodsLog"),t)},v=function(t){return l.a.post("".concat(p,"/orderSearchGoodsHot"),t)},x=function(t){return l.a.post("".concat(p,"/orderSearchLogDelete"),t)},_=function(t){return l.a.post("".concat(p,"/weixinOrderSerach"),t)},w=r("2f62"),k={components:{sxDropBall:s.a,sxMenu:o.a,sxInputNumber:i.a,sxPopup:c.a,sxSearchPanel:u.a,sxSearchList:h.a},data:function(){return{data:[],menusData:[],defaultActive:"",defaultActiveItem:{},goodsData:[],options:{pullUpLoad:!0},current:"",scrollY:0,cart:{},chooseCommodity:{},searching:0,searchData:"",timer:"",shoppingBoxImage:"",shoppingBoxImageStatus:{none:"https://alipic.lanhuapp.com/psc793f421061964d0-27b0-4e37-8345-29e37a0a96c1",open:"https://alipic.lanhuapp.com/ps82d84fa175b0fa70-7d84-430a-8140-566ea882f225",full:"https://alipic.lanhuapp.com/ps106a53bfaa2ac380-6244-4eac-9069-1d49d36b310f"},page:1,boxFee:{box_fee:"",handling_fee:"",min_fee:"",max_fee:""},panelData:null,listData:null,searchFalse:!1,box_no:"CEF33961"}},computed:Object(a.a)({},Object(w.c)(["user"]),{destination:function(){return{top:window.innerHeight-40,left:45}},cartLength:function(){return Object.keys(this.cart).length},cartMoney:function(){var t=0;for(var e in this.cart)t+=this.cart[e].goods_price*this.cart[e].goods_number;return t.toFixed(2)}}),watch:{searchData:function(){var t=this;clearTimeout(this.timer),this.timer=setTimeout(function(){t.changeSearch()},200)},$route:function(){this.routerInit()}},created:function(){"box_no"in this.$route.query&&(this.box_no=this.$route.query.box_no),this.shoppingBoxImage=this.shoppingBoxImageStatus.none,this.routerInit(),this.firstShow()},methods:{routerInit:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(e=this.$route.name.match(/\d+/g)?this.$route.name.match(/\d+/g):[]).length||(e[0]=0),this.searching=Number(e[0]),4===this.searching&&this.showSearchData();case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),goodsShow:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){var e,r,n,a,s,o,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f({cate_id:this.defaultActive,page:this.page,order_origin:4,box_no:this.box_no});case 2:for(e=t.sent,this.goodsData=e.data.return_data,r=!0,n=!1,a=void 0,t.prev=7,s=this.goodsData[Symbol.iterator]();!(r=(o=s.next()).done);r=!0)i=o.value,this.$set(this.chooseCommodity,i.goods_id,Object.assign({},i,{goods_number:0},this.chooseCommodity[i.goods_id]));t.next=15;break;case 11:t.prev=11,t.t0=t.catch(7),n=!0,a=t.t0;case 15:t.prev=15,t.prev=16,r||null==s.return||s.return();case 18:if(t.prev=18,!n){t.next=21;break}throw a;case 21:return t.finish(18);case 22:return t.finish(15);case 23:return t.abrupt("return",e.data.return_data);case 24:case"end":return t.stop()}},t,this,[[7,11,15,23],[16,,18,22]])}));return function(){return t.apply(this,arguments)}}(),searchShow:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(e){var r,n,a,s,o,i,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,this.searchingSubmit(!1,e);case 3:for(r=t.sent,this.goodsData=r,n=!0,a=!1,s=void 0,t.prev=8,o=this.goodsData[Symbol.iterator]();!(n=(i=o.next()).done);n=!0)c=i.value,this.$set(this.chooseCommodity,c.goods_id,Object.assign({},c,{goods_number:0},this.chooseCommodity[c.goods_id]));t.next=16;break;case 12:t.prev=12,t.t0=t.catch(8),a=!0,s=t.t0;case 16:t.prev=16,t.prev=17,n||null==o.return||o.return();case 19:if(t.prev=19,!a){t.next=22;break}throw s;case 22:return t.finish(19);case 23:return t.finish(16);case 24:r.length?this.$router.push({name:"buyGoods3"}):this.$router.push({name:"buyGoods1"});case 25:case"end":return t.stop()}},t,this,[[8,12,16,24],[17,,19,23]])}));return function(e){return t.apply(this,arguments)}}(),firstShow:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){var e,r,n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d({box_no:this.box_no});case 2:if(e=t.sent){t.next=5;break}return t.abrupt("return");case 5:for(n in r=e.data.return_data)this.$set(this.menusData,n,Object.assign({},r[n],{label:r[n].cate_name,value:r[n].cate_id}));if(this.menusData.unshift({label:"全    部",value:0,cate_id:0,cate_name:"全    部"}),this.menusData.length){t.next=10;break}return t.abrupt("return");case 10:return this.defaultActive=this.menusData[0].value,this.goodsShow(),t.next=14,g(Object.assign({},this.user));case 14:t.t0=t.sent,(a=t.t0)&&(this.boxFee=Object.assign({},this.boxFee,a.data.return_data));case 18:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),showGoods:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){var e,r,n,a,s,o,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f({cate_id:this.defaultActive,page:this.page,order_origin:4,box_no:this.box_no});case 2:if((e=t.sent).data.return_data.length){t.next=5;break}return t.abrupt("return",this.$createToast({txt:"该分类无更多商品",type:"txt"}).show());case 5:return t.next=7,this.goodsData.concat(e.data.return_data);case 7:for(this.goodsData=t.sent,r=!0,n=!1,a=void 0,t.prev=11,s=this.goodsData[Symbol.iterator]();!(r=(o=s.next()).done);r=!0)i=o.value,this.$set(this.chooseCommodity,i.goods_id,Object.assign({},i,{goods_number:0},this.chooseCommodity[i.goods_id]));t.next=19;break;case 15:t.prev=15,t.t0=t.catch(11),n=!0,a=t.t0;case 19:t.prev=19,t.prev=20,r||null==s.return||s.return();case 22:if(t.prev=22,!n){t.next=25;break}throw a;case 25:return t.finish(22);case 26:return t.finish(19);case 27:case"end":return t.stop()}},t,this,[[11,15,19,27],[20,,22,26]])}));return function(){return t.apply(this,arguments)}}(),scrollHandler:function(t){var e=t.y;this.scrollY=-e},handleSelect:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(e,r){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(n=this.$createToast({time:0})).show(),this.page=1,this.defaultActive=e.value,t.next=6,this.goodsShow();case 6:n.hide(),this.defaultActiveItem=e,this.$refs.scroll.scrollTo(0,0),this.$refs.scroll.refresh();case 11:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),changeHandler:function(t){},stickyChangeHandler:function(t){},onPullingDown:function(){var t=this;setTimeout(function(){t.$refs.scroll.forceUpdate()},1e3)},onPullingUp:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.page++,t.next=3,this.showGoods();case 3:this.$refs.scroll.forceUpdate(),this.$refs.scroll.refresh();case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),parabola:function(t){this.$refs.drop.drop(t)},openTheshoppingBox:function(){var t=this;if(!Object.keys(this.cart).length)return!1;this.$nextTick(function(){t.$refs.popup.isVisible?t.$refs.popup.closePopup():t.$refs.popup.openPopup()})},closePopup:function(){var t=this;this.$nextTick(function(){t.$refs.popup.closePopup()})},isMax:function(){this.$createToast({txt:"没了没了",type:"txt"}).show()},clickAction:function(t,e){if(this.boxFee.max_fee&&this.boxFee.max_fee-this.boxFee.box_fee-this.boxFee.handling_fee-this.cartMoney<=0)return this.shoppingBoxImage=this.shoppingBoxImageStatus.full,this.$createToast({txt:"盒子满了"});this.$set(this.cart,e.goods_id,this.chooseCommodity[e.goods_id]),this.cart[e.goods_id].goods_number||this.$delete(this.cart,e.goods_id),Object.keys(this.cart).length?this.shoppingBoxImage=this.shoppingBoxImageStatus.open:(this.shoppingBoxImage=this.shoppingBoxImageStatus.none,this.$refs.popup.closePopup())},clearCart:function(){for(var t in this.cart)this.$delete(this.cart,t);for(var e in this.chooseCommodity)this.$set(this.chooseCommodity[e],"goods_number",0);this.shoppingBoxImage=this.shoppingBoxImageStatus.none,this.$refs.popup.closePopup()},focusSearch:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.searchData){t.next=2;break}return t.abrupt("return");case 2:if(!this.panelData){t.next=4;break}return t.abrupt("return",this.$router.push({name:"goodsBox4"}));case 4:this.$router.push({name:"goodsBox4"});case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),showSearchData:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){var e,r,n,a,s,o,i,c,u,h,l,p,d,f,g,m;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.panelData=[],t.next=3,b(this.user);case 3:for(t.t0=t.sent,e=t.t0,r=e.data.return_data,this.$set(this.panelData,0,{label:"历史搜索",icon:"box-lajitong"}),this.$set(this.panelData[0],"children",[]),n=!0,a=!1,s=void 0,t.prev=11,o=r[Symbol.iterator]();!(n=(i=o.next()).done);n=!0)c=i.value,this.panelData[0].children.push({label:c.goods_name,value:c.goods_name});t.next=19;break;case 15:t.prev=15,t.t1=t.catch(11),a=!0,s=t.t1;case 19:t.prev=19,t.prev=20,n||null==o.return||o.return();case 22:if(t.prev=22,!a){t.next=25;break}throw s;case 25:return t.finish(22);case 26:return t.finish(19);case 27:return t.next=29,v(this.user);case 29:if(t.t2=t.sent,u=t.t2,!(h=u.data.return_data).length){t.next=54;break}for(this.$set(this.panelData,1,{label:"热门搜索"}),this.$set(this.panelData[1],"children",[]),l=!0,p=!1,d=void 0,t.prev=38,f=h[Symbol.iterator]();!(l=(g=f.next()).done);l=!0)m=g.value,this.panelData[1].children.push({label:m.goods_name,value:m.goods_name});t.next=46;break;case 42:t.prev=42,t.t3=t.catch(38),p=!0,d=t.t3;case 46:t.prev=46,t.prev=47,l||null==f.return||f.return();case 49:if(t.prev=49,!p){t.next=52;break}throw d;case 52:return t.finish(49);case 53:return t.finish(46);case 54:case"end":return t.stop()}},t,this,[[11,15,19,27],[20,,22,26],[38,42,46,54],[47,,49,53]])}));return function(){return t.apply(this,arguments)}}(),changeSearch:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){var e,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.searchFalse){t.next=2;break}return t.abrupt("return");case 2:if(this.searchData.length){t.next=5;break}return t.abrupt("return",this.$router.replace({name:"buyGoods4"}));case 5:return t.next=8,this.searchingSubmit(!1);case 8:if((e=t.sent).length){t.next=11;break}return t.abrupt("return",this.$router.replace({name:"buyGoods1"}));case 11:for(r in this.listData=[],e)this.$set(this.listData,r,{label:e[r].goods_name});this.$router.replace({name:"buyGoods5"});case 14:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),blurSearch:function(){switch(this.searching){case 1:case 2:case 4:case 5:if(this.searchFalse)return;this.$refs.searchInput.$refs.input.focus()}},searchingSubmit:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){var e,r,n,a=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=!(a.length>0&&void 0!==a[0])||a[0],r=a.length>1?a[1]:void 0,!e){t.next=4;break}return t.abrupt("return",this.searchShow(this.searchData));case 4:return t.next=6,_({box_no:this.box_no,order_origin:4,goods_name:r||this.searchData});case 6:return n=t.sent,t.abrupt("return",n.data.return_data);case 11:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),back:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.searchFalse=!0,this.searchData="",t.next=4,this.$refs.searchInput.$refs.input.blur();case 4:return t.next=6,this.goodsShow();case 6:return t.next=8,this.$router.replace({name:"buyGoods"});case 8:setTimeout(function(){e.searchFalse=!1},300),this.$refs.scroll.refresh();case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),submit:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){var e,r,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(r in e=[],this.cart)e.push(this.cart[r]);return t.next=5,m({goods_info:e,box_no:this.box_no,order_source:4,original_price:0,preferential_amount:0,payable_fee:0,preferential_type:0,discount_id:0,user_coupon_id:0});case 5:n=t.sent,this.$createToast({txt:n.data.return_msg,type:"txt"}).show();case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),panelIcon:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("历史搜索"!==e.row.label){t.next=8;break}return t.next=4,x(this.user);case 4:r=t.sent,this.$createToast({txt:r.data.return_msg,type:"txt"}).show(),this.showSearchData();case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getPanelCell:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(e){var r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.searchFalse=!0,this.searchData=e.cell.label,t.next=4,this.searchShow(e.cell.data);case 4:setTimeout(function(){r.searchFalse=!1},300);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getListRow:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(e){var r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.searchFalse=!0,this.searchData=e.row.label,t.next=4,this.searchShow(e.row.label);case 4:setTimeout(function(){r.searchFalse=!1},300);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},mounted:function(){document.title="认领补货"}},y=(r("6ef7"),r("2877")),C=Object(y.a)(k,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"all"},[n("div",{staticClass:"content"},[n("div",{staticClass:"container"},[t.boxFee.max_fee?n("div",{staticClass:"notice"},[n("i",{staticClass:"box-laba"}),t._v("\n        您的盒子目前有"+t._s(t.boxFee.box_fee)+"元商品，还可添加"+t._s(t.boxFee.max_fee-t.boxFee.box_fee-t.boxFee.handling_fee-t.cartMoney)+"商品\n      ")]):t._e(),n("div",{ref:"searchNav",staticClass:"searchNav"},[n("transition",{attrs:{name:"back"}},[[0].includes(t.searching)?t._e():n("i",{staticClass:"cubeic-back backIcon",on:{click:t.back}})]),n("cube-input",{ref:"searchInput",attrs:{type:"search",placeholder:"请输入商品名称"},on:{focus:t.focusSearch,blur:t.blurSearch},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.searchingSubmit(e):null}},model:{value:t.searchData,callback:function(e){t.searchData=e},expression:"searchData"}},[n("i",{staticClass:"cubeic-search",attrs:{slot:"prepend"},slot:"prepend"})])],1),n("div",{ref:"searchContent",staticClass:"searchContent"},[n("div",{directives:[{name:"show",rawName:"v-show",value:[0].includes(t.searching),expression:"[0].includes(searching)"}],ref:"searchContentLeft",staticClass:"left"},[n("sx-menu",{attrs:{menusData:t.menusData,defaultActive:t.defaultActive},on:{select:t.handleSelect}})],1),n("cube-scroll",{directives:[{name:"show",rawName:"v-show",value:[0,3].includes(t.searching),expression:"[0, 3].includes(searching)"}],ref:"scroll",staticClass:"right",attrs:{options:t.options,"scroll-events":["scroll"]},on:{"pulling-up":t.onPullingUp,scroll:t.scrollHandler}},[t.goodsData.length?n("ul",{staticClass:"rightDetails"},t._l(t.goodsData,function(e,r){return n("li",{key:r},[n("div",{staticClass:"goodsRow"},[n("img",{attrs:{src:e.goods_img}}),n("div",{staticClass:"goodsContent"},[n("div",{staticClass:"goodsContentTop"},[t._v("\n                    "+t._s(e.goods_name)+"\n                    "),n("div",{staticClass:"abstract"},[n("span",[t._v(t._s(e.goods_spec))]),t._v(" \n                      "),n("span",[t._v(t._s(e.stock_num>0?"库存"+e.stock_num+e.goods_unit:"已售空"))])])]),n("div",{staticClass:"goodsContentBottom"},[n("font",[n("span",[t._v("￥"+t._s(e.goods_price))]),t._v("/"+t._s(e.goods_unit))]),e.stock_num>0?n("sx-input-number",{attrs:{max:e.stock_num,item:e},on:{isMax:t.isMax,clickAction:t.clickAction},model:{value:t.chooseCommodity[e.goods_id].goods_number,callback:function(r){t.$set(t.chooseCommodity[e.goods_id],"goods_number",r)},expression:"chooseCommodity[food.goods_id].goods_number"}}):t._e()],1)])])])}),0):n("div",{staticClass:"noGoodsData"},[n("img",{attrs:{src:r("1a10"),alt:""}}),t._v("\n            暂无商品\n            ")])]),n("div"),[1].includes(t.searching)?n("div",{staticClass:"noSearch"},[n("img",{attrs:{src:r("74c1"),alt:""}}),t._v("\n          没有搜索结果\n          ")]):t._e(),[4].includes(t.searching)?n("sx-search-panel",{attrs:{panelData:t.panelData},on:{panelIcon:t.panelIcon,getPanelCell:t.getPanelCell}}):t._e(),[5].includes(t.searching)?n("sx-search-list",{attrs:{listData:t.listData},on:{getListRow:t.getListRow}}):t._e()],1)]),n("sx-popup",{ref:"popup",attrs:{bar:Boolean(t.boxFee.max_fee)}},[n("div",{attrs:{slot:"bar"},slot:"bar"},[t._v("\n        还可添加"+t._s(t.boxFee.max_fee-t.boxFee.box_fee-t.boxFee.handling_fee-t.cartMoney)+"元，盒子就满了\n      ")]),n("div",{staticClass:"popupLeft",attrs:{slot:"left"},slot:"left"},[t._v("\n        已选商品 "),n("span",[t._v("(共"+t._s(t.cartLength)+"件商品)")])]),n("div",{staticClass:"popupRight",attrs:{slot:"right"},on:{click:t.clearCart},slot:"right"},[n("i",{staticClass:"box-lajitong"}),t._v("清空\n      ")]),n("transition-group",{attrs:{name:"list"}},t._l(t.cart,function(e,r){return n("div",{key:e.goods_id,staticClass:"popupContent list-item",attrs:{"data-index":r}},[n("div",{staticClass:"popupContentDetails"},[n("span",[t._v(t._s(e.goods_name)+" "+t._s(e.goods_spec)+"/"+t._s(e.goods_unit))]),n("span",[t._v("￥"+t._s(e.goods_price))])]),n("sx-input-number",{attrs:{max:e.stock,item:e},on:{isMax:t.isMax,clickAction:t.clickAction},model:{value:e.goods_number,callback:function(r){t.$set(e,"goods_number",r)},expression:"row.goods_number"}})],1)}),0)],1)],1),n("div",{ref:"bottom",staticClass:"bottom"},[n("div",{staticClass:"box",on:{click:t.closePopup}},[n("div",{staticClass:"shoppingCart",style:{transition:"all .3s ease",backgroundColor:t.cartLength?"":"#cccccc"},on:{click:function(e){return e.stopPropagation(),t.openTheshoppingBox(e)}}},[n("i",{staticClass:"box-gouwuche"}),n("span",{directives:[{name:"show",rawName:"v-show",value:t.cartLength,expression:"cartLength"}]},[t._v(t._s(t.cartLength))])]),t.cartLength?n("div",{staticClass:"info"},[n("p",[t._v("￥"+t._s(t.cartMoney))]),t.boxFee.min_fee?n("div",[t._v("\n          满 "+t._s(t.boxFee.min_fee)+" 元起配送\n        ")]):t._e()]):n("div",{staticClass:"info"},[n("span",[t._v("未选购商品")])])]),n("div",{staticClass:"rightBtn"},[n("cube-button",{attrs:{primary:!0,disabled:!Boolean(Number(t.cartMoney))},on:{click:t.submit}},[t._v("结算")])],1)]),n("sx-drop-ball",{ref:"drop",attrs:{destination:t.destination}})],1)},[],!1,null,"7b6ac659",null);C.options.__file="buyGoods.vue",e.default=C.exports}}]);